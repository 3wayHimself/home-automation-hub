{% extends "heating/base.html" %}

{% block card_title %}Central Heating{% endblock %}

{% block card_content %}  
    <div class="float-right">
        <span class="badge badge-success{% if not ch_is_on %} d-none{% endif %}" id="badge_heating_on">Heating is on</span>
        <span class="badge badge-danger{% if ch_is_on %} d-none{% endif %}" id="badge_heating_off">Heating is off</span>
        <button class="btn btn-secondary" id="btn_toggle_heating">
            {% if ch_is_on %}
                Turn Off
            {% else %}
                Turn On
            {% endif %}
        </button>
    </div>

    <div class="card col-md-8 offset-md-2">
        <div class="card-body">
            <div class="text-center">
                Control Mode:
                <div class="btn-group btn-group-toggle" data-toggle="buttons" id="toggle-control-mode">
                    <label class="btn btn-secondary{% if control_mode=='manual' %} active{% endif %}" id="control-mode-manual">
                        <input type="radio" name="control-mode" data-mode="manual" autocomplete="off"{% if control_mode=='manual' %} checked{% endif %}> Manual
                    </label>
                    <label class="btn btn-secondary{% if control_mode=='timer' %} active{% endif %}" id="control-mode-timer">
                        <input type="radio" name="control-mode" data-mode="timer" autocomplete="off"{% if control_mode=='timer' %} checked{% endif %}> Timer
                    </label>
                </div>
            </div>
            <div id="manual-controls" class="mt-2{% if control_mode!='manual' %} d-none{% endif %}">
                <div class="text-center">
                    <div class="form-inline d-block">
                        Turn on
                        <select class="form-control" id="select-manual-start-time">
                            <option value="now">Now</option>
                            <option value="at">At</option>
                        </select>

                        <input type="time" class="form-control" name="manual-start-time" pattern="[0-9]{2}:[0-9]{2}" required>

                        <select class="form-control" id="select-manual-end-time">
                            <option value="indefinitely">Indefinitely</option>
                            <option value="until">Until</option>
                        </select>
                        
                        <input type="time" class="form-control" name="end-time" pattern="[0-9]{2}:[0-9]{2}" required>
                        <button class="btn btn-success">Go!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>Temperature</th>
                <th>CH Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><span id="val-temperature">{{ temperature }}</span>&deg;c</td>
                <td></td>
            </tr>
        </tbody>
    </table>
{% endblock %}

{% block module_scripts %}
<script src="{{ module_base_path }}/static/js/index.js"></script>
{% endblock %}